{"slots":{"0":{"name":"slot1","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"--Configuration for this script can be found in the start() function in the menu to your left\n--Edit code in this section at your own risk\n\nfunction update()\n    barAndTextHeight = (1120-120)/(#spaceTanks + #atmoTanks)\n    spaceSVG=[[]]\n    numBars=0\n    spaceFuelPercents = {}\n    for i=1,#spaceTanks,1 do\n        spaceFuelPercents[i] = 1890*((json.decode(spaceTanks[i].getData()).percentage)/100)\n        spaceSVG = spaceSVG..[[<text x=\"15\" y=\"]]..120+(numBars * barAndTextHeight)..[[\" font-size=\"40\" text-anchor=\"start\" fill=\"]]..spaceNameColor..[[\">]]..spaceTankNames[i]..[[</text>\n\t\t                     <rect x=\"15\" y=\"]]..135+(numBars * barAndTextHeight)..[[\" width=\"1890\" height=\"]]..(barAndTextHeight-60)..[[\" fill=\"]]..backgroundColor..[[\" stroke=\"]]..borderColor..[[\" stroke-width=\"5\"/>\n\t\t                     <rect x=\"15\" y=\"]]..135+(numBars * barAndTextHeight)..[[\" width=\"]]..spaceFuelPercents[i]..[[\" height=\"]]..(barAndTextHeight-60)..[[\" fill=\"]]..spaceBarColor..[[\" stroke-width=\"0\"/>]]\n        numBars = numBars+1\n    end\n    atmoSVG=[[]]\n    atmoFuelPercents = {}\n    for i=1,#atmoTanks,1 do\n        atmoFuelPercents[i] = 1890*((json.decode(atmoTanks[i].getData()).percentage)/100)\n        atmoSVG = atmoSVG..[[<text x=\"15\" y=\"]]..120+(numBars * barAndTextHeight)..[[\" font-size=\"40\" text-anchor=\"start\" fill=\"]]..atmoTextColor..[[\">]]..atmoTankNames[i]..[[</text>\n\t\t\t\t\t    <rect x=\"15\" y=\"]]..135+(numBars * barAndTextHeight)..[[\" width=\"1890\" height=\"]]..(barAndTextHeight-60)..[[\" fill=\"]]..backgroundColor..[[\" stroke=\"]]..borderColor..[[\" stroke-width=\"5\"/>\n\t\t\t\t\t    <rect x=\"15\" y=\"]]..135+(numBars * barAndTextHeight)..[[\" width=\"]]..atmoFuelPercents[i]..[[\" height=\"]]..(barAndTextHeight-60)..[[\" fill=\"]]..atmoBarColor..[[\" stroke-width=\"0\"/>]]\n        numBars = numBars+1\n    end\n\n\n    \n    svg = [[<svg class=\"bootstrap\" viewBox=\"0 0 1920 1120\" style=\"width:100%; height:100%\"><svg version=\"1.1\" baseProfile=\"full\" xmlns=\"http://www.w3.org/2000/svg\">\n  \n\t<rect width=\"100%\" height=\"100%\" fill=\"]]..backgroundColor..[[\" />\n\n \t<text x=\"15\" y=\"55\" font-size=\"60\" text-anchor='start' fill=\"]]..headerColor..[[\">]]..windowName..[[</text>\n    \n \t<line x1=\"0\" x2=\"1920\" y1=\"75\" y2=\"75\" stroke=\"]]..borderColor..[[\", fill=\"]]..borderColor..[[\"/>\n\t\n\t]]..spaceSVG..[[\n\n\t]]..atmoSVG..[[\n\n</svg></svg>]]\n\nfor i=1,#screens,1 do\n        screens[i].setSVG(svg)\nend\n    \nend\n\nupdate()\n\n\n\n\n","filter":{"args":[{"value":"updateFuelDisplay"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"0"},{"code":"--Script Information----------------------------------------------------------------------------------------------------------------------\n--Version: 1.2\n--Supports: \n     --Up to 4 Atmospheric Tanks\n     --Up to 4 Space Tanks\n     --Rocket Tanks coming soon(have to get one or two to test)\n--Created by: Rost\n--For Support:\n     --Discord: Rost#6764\n     --Ingame: RostNerd\n\n--Script Configuration--------------------------------------------------------------------------------------------------------------------\n\n--Debug Mode(prints extra values to help with troubleshooting)\ndebug = false\n\n--Update Speed(rate at which the screen updates in seconds\nupdateSpeed = 1 --export\n\n--Header Text\nwindowName = \"Fuel Management\" --export\n\n--Name of Space Tank 1\nspaceTank1Name = \"Space Tank 1\" --export\n\n--Name of Space Tank 2\nspaceTank2Name = \"Space Tank 2\" --export\n\n--Name of Space Tank 3\nspaceTank3Name = \"Space Tank 3\" --export\n\n--Name of Space Tank 4\nspaceTank4Name = \"Space Tank 4\" --export\n\n--Name of Atmo Tank 1\natmoTank1Name = \"Atmospheric Tank 1\" --export\n\n--Name of Atmo Tank 2\natmoTank2Name = \"Atmospheric Tank 2\" --export\n\n--Name of Atmo Tank 3\natmoTank3Name = \"Atmospheric Tank 3\" --export\n\n--Name of Atmo Tank 4\natmoTank4Name = \"Atmospheric Tank 4\" --export\n\n--Background Color\nbackgroundColor = \"#2f343d\" --export\n\n--Bar Border Color\nborderColor = \"white\" --export\n\n--Header Text Color\nheaderColor = \"white\" --export\n\n--Space Text Color\nspaceNameColor = \"orange\" --export\n\n--Space Bar Color\nspaceBarColor = \"orange\" --export\n\n--Atmo Text Color\natmoTextColor = \"#34b1eb\" --export\n\n--Atmo Bar Color\natmoBarColor = \"#34b1eb\" --export\n\n--Script Configuration Done--Modifications beyond here are at your own risk--\n------------------------------------------------------------------------------------------------------------------    \nfunction insertionSort(array)\n    local len = #array\n    local j\n    for j = 2, len do\n        local key = array[j]\n        local i = j - 1\n        while i > 0 and json.decode(array[i].getData()).name > json.decode(key.getData()).name do\n            array[i + 1] = array[i]\n            i = i - 1\n        end\n        array[i + 1] = key\n    end\n    return array\nend\n\natmoTanks = {}\n\nfor key, value in pairs(unit) do\n  if type(value) == \"table\" and type(value.export) == \"table\" then -- `value` is an element and `key` is the slot name\n    if value.getElementClass then\n      if value.getElementClass() == \"AtmoFuelContainer\" then\n          atmoTanks[#atmoTanks + 1] = value\n      end\n    end\n  end\nend \n\n--system.print(json.decode(atmoTanks[1].getData()).name..'|'..json.decode(atmoTanks[2].getData()).name)\natmoTanks = insertionSort(atmoTanks)\n--system.print(json.decode(atmoTanks[1].getData()).name..'|'..json.decode(atmoTanks[2].getData()).name)\n\nspaceTanks = {}\nfor key, value in pairs(unit) do\n  if type(value) == \"table\" and type(value.export) == \"table\" then -- `value` is an element and `key` is the slot name\n    if value.getElementClass then\n      if value.getElementClass() == \"SpaceFuelContainer\" then\n           spaceTanks[#spaceTanks + 1] = value\n      end\n    end\n  end\nend \n\n--system.print(json.decode(spaceTanks[1].getData()).name..'|'..json.decode(spaceTanks[2].getData()).name)\nspaceTanks = insertionSort(spaceTanks)\n--system.print(json.decode(spaceTanks[1].getData()).name..'|'..json.decode(spaceTanks[2].getData()).name)\n\nscreens = {}\n\nfor key, value in pairs(unit) do\n  if type(value) == \"table\" and type(value.export) == \"table\" then -- `value` is an element and `key` is the slot name\n    if value.getElementClass then\n      if value.getElementClass() == \"ScreenUnit\" then\n           screens[#screens + 1] = value\n      end\n    end\n  end\nend \n\nif debug then\n    system.print('Number of Screens: '..#screens)\n    system.print('Number of Space Tanks: '..#spaceTanks)\n    system.print('Number of Atmospheric Tanks: '..#atmoTanks)\nend\n\nspaceTankNames = {}\nif #spaceTanks >= 1 then\n    spaceTankNames[1] = spaceTank1Name\nend\nif #spaceTanks >= 2 then\n    spaceTankNames[2] = spaceTank2Name\nend\nif #spaceTanks >= 3 then\n    spaceTankNames[3] = spaceTank3Name\nend\nif #spaceTanks == 4 then\n    spaceTankNames[4] = spaceTank4Name\nend    \n\natmoTankNames = {}\nif #atmoTanks >= 1 then\n    atmoTankNames[1] = atmoTank1Name\nend\nif #atmoTanks >= 2 then\n    atmoTankNames[2] = atmoTank2Name\nend\nif #atmoTanks >= 3 then\n    atmoTankNames[3] = atmoTank3Name\nend\nif #atmoTanks == 4 then\n    atmoTankNames[4] = atmoTank4Name\nend   \n\nunit.setTimer('updateFuelDisplay',updateSpeed)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"1"}],"methods":[],"events":[]}
